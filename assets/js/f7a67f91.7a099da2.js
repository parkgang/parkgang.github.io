"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2969],{9547:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(6687);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=a.createContext({}),c=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=i,k=u["".concat(o,".").concat(d)]||u[d]||m[d]||r;return n?a.createElement(k,l(l({ref:t},p),{},{components:n})):a.createElement(k,l({ref:t},p))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=u;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:i,l[1]=s;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6558:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(6687),i=n(6355),r={note:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})),tip:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},a.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})),danger:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},a.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})),info:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})),caution:a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},l={note:"secondary",tip:"success",danger:"danger",info:"info",caution:"warning"};function s(e){var t=e.children,n=e.type,s=e.title,o=void 0===s?n:s,c=e.icon,p=void 0===c?r[n]:c;return a.createElement("div",{className:(0,i.Z)("admonition","admonition-"+n,"alert","alert--"+l[n])},a.createElement("div",{className:"admonition-heading"},a.createElement("h5",null,a.createElement("span",{className:"admonition-icon"},p),o)),a.createElement("div",{className:"admonition-content"},t))}},9580:function(e,t,n){n.r(t),n.d(t,{assets:function(){return m},contentTitle:function(){return c},default:function(){return k},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return u}});var a=n(9853),i=n(5309),r=(n(6687),n(9547)),l=n(6558),s=["components"],o={sidebar_position:5,toc_max_heading_level:6,tags:["devops","github","github action","CI/CD"]},c="github action",p={unversionedId:"workflows-with-aks-github-slack/github-action/index",id:"workflows-with-aks-github-slack/github-action/index",title:"github action",description:"\ub4dc\ub514\uc5b4 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uad6c\ucd95 \ub9c8\uc9c0\ub9c9 \ucc55\ud130\uc785\ub2c8\ub2e4. \ud83e\udd2d \uc774\uc804\ubd80\ud130 \uc124\uc815\ud558\uace0 \ub9cc\ub4e4\uc5b4 \ub193\uc740 \uc778\ud504\ub77c\ub97c \uc790\ub3d9\ud654 \ud30c\uc774\ud504\ub77c\uc778\uc73c\ub85c \ud0dc\uc6b8 \uc218 \uc788\ub3c4\ub85d \uc124\uc815\ud560 \uac83\uc785\ub2c8\ub2e4.",source:"@site/series/workflows-with-aks-github-slack/github-action/index.mdx",sourceDirName:"workflows-with-aks-github-slack/github-action",slug:"/workflows-with-aks-github-slack/github-action/",permalink:"/series/workflows-with-aks-github-slack/github-action/",draft:!1,tags:[{label:"devops",permalink:"/series/tags/devops"},{label:"github",permalink:"/series/tags/github"},{label:"github action",permalink:"/series/tags/github-action"},{label:"CI/CD",permalink:"/series/tags/ci-cd"}],version:"current",lastUpdatedAt:1656719030,formattedLastUpdatedAt:"2022. 7. 1.",sidebarPosition:5,frontMatter:{sidebar_position:5,toc_max_heading_level:6,tags:["devops","github","github action","CI/CD"]},sidebar:"tutorialSidebar",previous:{title:"slack \uc124\uc815",permalink:"/series/workflows-with-aks-github-slack/slack-settings/"},next:{title:"\ud68c\uace0",permalink:"/series/workflows-with-aks-github-slack/retrospect/"}},m={},u=[{value:"Github Action",id:"github-action-1",level:2},{value:"\ubc30\ud3ec \uc815\ucc45",id:"\ubc30\ud3ec-\uc815\ucc45",level:3},{value:"yaml",id:"yaml",level:3},{value:"steps",id:"steps",level:4},{value:"\uc774\uc678 \uc8fc\uc758\uc0ac\ud56d",id:"\uc774\uc678-\uc8fc\uc758\uc0ac\ud56d",level:2},{value:"image\uc5d0 <code>latest</code> tag\ub294 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",id:"image\uc5d0-latest-tag\ub294-\uc0ac\uc6a9\ud558\uc9c0-\uc54a\uc2b5\ub2c8\ub2e4",level:3},{value:"image \uc774\ub984\uc5d0 <code>.</code> \uc740 \ud3ec\ud568\ud558\uc9c0 \uc54a\ub3c4\ub85d \ud569\ub2c8\ub2e4.",id:"image-\uc774\ub984\uc5d0--\uc740-\ud3ec\ud568\ud558\uc9c0-\uc54a\ub3c4\ub85d-\ud569\ub2c8\ub2e4",level:3},{value:"Github Organizations Secrets",id:"github-organizations-secrets",level:2},{value:"Github Container Registry Token",id:"github-container-registry-token",level:3},{value:"Azure Credentials",id:"azure-credentials",level:3},{value:"Slack Webhook URL",id:"slack-webhook-url",level:3},{value:"\ucd5c\uc885",id:"\ucd5c\uc885",level:3},{value:"CI/CD \ud14c\uc2a4\ud2b8",id:"cicd-\ud14c\uc2a4\ud2b8",level:2},{value:"\ub9c8\ubb34\ub9ac",id:"\ub9c8\ubb34\ub9ac",level:2}],d={toc:u};function k(e){var t=e.components,o=(0,i.Z)(e,s);return(0,r.kt)("wrapper",(0,a.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"github-action"},"github action"),(0,r.kt)("p",null,"\ub4dc\ub514\uc5b4 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uad6c\ucd95 \ub9c8\uc9c0\ub9c9 \ucc55\ud130\uc785\ub2c8\ub2e4. \ud83e\udd2d \uc774\uc804\ubd80\ud130 \uc124\uc815\ud558\uace0 \ub9cc\ub4e4\uc5b4 \ub193\uc740 \uc778\ud504\ub77c\ub97c \uc790\ub3d9\ud654 \ud30c\uc774\ud504\ub77c\uc778\uc73c\ub85c \ud0dc\uc6b8 \uc218 \uc788\ub3c4\ub85d \uc124\uc815\ud560 \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("h2",{id:"github-action-1"},"Github Action"),(0,r.kt)("p",null,"CI/CD Service\ub294 Github Action\uc744 \uc0ac\uc6a9\ud560 \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"\ubc30\ud3ec-\uc815\ucc45"},"\ubc30\ud3ec \uc815\ucc45"),(0,r.kt)("p",null,"\ud574\ub2f9 \uc2dc\ub9ac\uc988\uc758 \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uad6c\ucd95\ud558\uba74\uc11c ",(0,r.kt)("inlineCode",{parentName:"p"},"develop")," branch\uc73c\ub85c \uac78\ub9ac\ub294 PR\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"qa")," \ub97c \uc704\ud55c \ubc30\ud3ec, release\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"main")," \uc744 \uc704\ud55c \ubc30\ud3ec\ub77c\uace0 \ub9d0\ud588\uc5c8\uc2b5\ub2c8\ub2e4. \ud574\ub2f9 \uc694\uad6c\uc0ac\ud56d\uc744 \uba85\uc2dc\uc801\uc73c\ub85c \uc815\uc758\ud558\uba74 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"qa",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"release branch\uac00 push \ub420 \ub54c"))),(0,r.kt)("li",{parentName:"ol"},"prod",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"release tag\uac00 \uc0dd\uc131\ub420 \ub54c")))),(0,r.kt)("h3",{id:"yaml"},"yaml"),(0,r.kt)("p",null,"\uc0ac\uc6a9\ub418\ub294 yaml\uc740 \uc544\ub798\uc640 \uac19\uc73c\uba70 github action \uad00\ub828 \ud30c\uc77c\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows")," \uc5d0 \uc815\uc758\ud558\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"qa")," \uc640 ",(0,r.kt)("inlineCode",{parentName:"p"},"prod")," \uc758 \ud2b8\ub9ac\uac70 \uc870\uac74\uc774 \ub2ec\ub77c\uc11c 2\uac1c\uc758 yaml\uc774 \uc874\uc7ac\ud558\uba70 \uc544\ub798\uc758 yaml\ub3c4 \uc815\ub2f5\uc740 \uc544\ub2d9\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ub610\ud55c, \uc544\ub798\uc758 yaml\uc740 \ubc30\ud3ec \ud658\uacbd\uc5d0 \ub9de\uac8c ",(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," \uc744 \ub530\ub85c \uc815\uc758\ud574\uc11c \ub3cc\uc544\uac00\ub3c4\ub85d \ub418\uc5b4\uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc989, \uc911\uc694\ud55c \uac83\uc740 yaml \ub0b4\uc6a9\uc744 \uc774\ud574\ud558\ub294 \uac83\uc774\uba70 \uc5ec\uae30\uc11c\ub294 \ud070 \ud2c0\uc5d0\uc11c \ub3cc\uc544\uac00\ub294 step\uc5d0 \ub300\ud574 \uc124\uba85\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\uc544\ub798\uc758 yaml\uc740 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/belf-kr/front-server/blob/v1.2.0/.github/workflows/aks-qa-deploy.yaml"},"front-server@v1.2.0 - aks-qa-deploy.yaml")," \uc758 \ub0b4\uc6a9\uc774\uba70 \ud574\ub2f9 yaml \uc774\uc678 pvc\ub97c \uc0ac\uc6a9\ud558\ub294 case\ub3c4 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/belf-kr/storage-service/blob/v1.1.0/.github/workflows/aks-qa-deploy.yaml"},"storage-service@v1.1.0 - aks-qa-deploy.yaml")," \uc5d0 \uc874\uc7ac\ud569\ub2c8\ub2e4."),(0,r.kt)("p",{parentName:"div"},"\uc774\uc678 ",(0,r.kt)("inlineCode",{parentName:"p"},"prod")," yaml\ub3c4 \uad6c\uacbd\ud574\ubcf4\uc138\uc694!"))),(0,r.kt)("h4",{id:"steps"},"steps"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"repo\ub97c checkout \ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uba85\uc2dc\ub41c ",(0,r.kt)("inlineCode",{parentName:"li"},"Dockerfile")," \ub300\ub85c image\ub97c build \ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"container registry\uc5d0 \ub85c\uadf8\uc778 \ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"build \ub41c image\ub97c container registry\uc73c\ub85c push \ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"AKS\uc5d0 \ub85c\uadf8\uc778 \ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"k8s\uc5d0 namespace\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uc815\uc758\ub41c k8s yaml\uc5d0 \ub9de\uac8c object\ub97c \uc801\uc6a9\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"k8s ingress\uc5d0 \ub4f1\ub85d\ud569\ub2c8\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"slack\uc5d0 \ubc30\ud3ec \uc644\ub8cc \uc54c\ub9bc\uc744 \uc804\uc1a1\ud569\ub2c8\ub2e4.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title=".github/workflows/aks-qa-deploy.yaml"',title:'".github/workflows/aks-qa-deploy.yaml"'},'name: AKS-Deploy-Qa\n\non:\n  pull_request:\n    branches:\n      - develop\n\nenv:\n  IMAGE_HOST: ghcr.io/${{ github.repository }}\n  IMAGE_NAME: nextjs-qa\n  IMAGE_TAG: ${{ github.sha }}\n  NAMESPACE: qa\n\njobs:\n  apply:\n    runs-on: ubuntu-latest\n    steps:\n      - name: repo checkout\n        uses: actions/checkout@v2\n\n      - name: build image\n        run: docker build . --file Dockerfile.qa --tag $IMAGE_NAME\n\n      - name: log into registry\n        run: echo "${{ secrets.CR_PAT }}" | docker login ghcr.io -u ${{ github.actor }} --password-stdin\n\n      - name: push image\n        run: |\n          docker tag $IMAGE_NAME $IMAGE_HOST/$IMAGE_NAME:$IMAGE_TAG\n          docker push $IMAGE_HOST/$IMAGE_NAME:$IMAGE_TAG\n\n      - name: aks login\n        uses: azure/aks-set-context@v1\n        with:\n          creds: "${{ secrets.AZURE_CREDENTIALS }}"\n          resource-group: "${{ secrets.CLUSTER_RESOURCE_GROUP }}"\n          cluster-name: "${{ secrets.CLUSTER_NAME }}"\n        id: login\n\n      - name: create namespace\n        run: |\n          kubectl create namespace ${{ env.NAMESPACE }} --dry-run=client -o json | kubectl apply -f -\n\n      - name: aks apply object\n        uses: Azure/k8s-deploy@v1.4\n        with:\n          namespace: ${{ env.NAMESPACE }}\n          manifests: |\n            ./k8s/qa.yaml\n          images: |\n            ${{ env.IMAGE_HOST }}/${{ env.IMAGE_NAME }}:${{ env.IMAGE_TAG }}\n\n      - name: aks apply service for ingress\n        uses: Azure/k8s-deploy@v1.4\n        with:\n          namespace: ingress-basic\n          manifests: |\n            ./k8s/qa-external.yaml\n\n      - name: slack notification\n        uses: rtCamp/action-slack-notify@v2\n        env:\n          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}\n          SLACK_MESSAGE: ${{ github.repository }}\uac00 ${{ env.NAMESPACE }} \ud658\uacbd\uc5d0 \ubc30\ud3ec\ub418\uc5c8\uc2b5\ub2c8\ub2e4 \ud83d\ude80\n')),(0,r.kt)("h2",{id:"\uc774\uc678-\uc8fc\uc758\uc0ac\ud56d"},"\uc774\uc678 \uc8fc\uc758\uc0ac\ud56d"),(0,r.kt)("h3",{id:"image\uc5d0-latest-tag\ub294-\uc0ac\uc6a9\ud558\uc9c0-\uc54a\uc2b5\ub2c8\ub2e4"},"image\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"h3"},"latest")," tag\ub294 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ubc30\ud3ec \uc2dc \uc5b4\ub5a4 \uc774\ubbf8\uc9c0\ub97c pull \ud574\uc57c\ud558\ub294\uc9c0 \ub9e4\uc6b0 \ubaa8\ud638\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"image-\uc774\ub984\uc5d0--\uc740-\ud3ec\ud568\ud558\uc9c0-\uc54a\ub3c4\ub85d-\ud569\ub2c8\ub2e4"},"image \uc774\ub984\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"h3"},".")," \uc740 \ud3ec\ud568\ud558\uc9c0 \uc54a\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,"Github\uc5d0\uc11c \uc815\uc0c1\uc801\uc73c\ub85c \ud398\uc774\uc9c0\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud569\ub2c8\ub2e4."),(0,r.kt)(l.Z,{type:"caution",title:"\ub9cc\uc57d . \uc744 \ud3ec\ud568\ud55c\ub2e4\uba74?",mdxType:"Admonition"},(0,r.kt)("p",null,"\uc544\ub798\uc758 \uc0ac\uc9c4\uc740 image \uc774\ub984\uc744 ",(0,r.kt)("inlineCode",{parentName:"p"},"front-server/next.js")," \uc73c\ub85c \uc124\uc815\ud558\uace0 packages\uc5d0 \ub4e4\uc5b4\uac00\uba74 \ub098\uc624\ub294 \ud654\uba74\uc778\ub370 \uae68\uc9c0\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(4280).Z}))),(0,r.kt)("h2",{id:"github-organizations-secrets"},"Github Organizations Secrets"),(0,r.kt)("p",null,"\uc704 yaml\uc744 \ubcf4\uba74 \uc54c \uc218 \uc788\uc9c0\ub9cc Azure \uc811\uc18d \uc815\ubcf4\uc640 \uac19\uc740 \uc815\ubcf4\ub294 secrets\uc73c\ub85c \uad00\ub9ac\ub418\uace0 \uc788\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"org\uc5d0 \uc788\ub294 repo\ub4e4\uc740 \ubaa8\ub450 \uac19\uc740 container registry, k8s cluster, slack workspace\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c org level\uc5d0\uc11c secrets\uc744 \uad00\ub9ac\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,"organizations \u2192 settings \u2192 secrets \uc73c\ub85c \ub4e4\uc5b4\uac00\uc154\uc11c \ucd94\uac00\ud558\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"github-container-registry-token"},"Github Container Registry Token"),(0,r.kt)("p",null,"Github Container Registry\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d Token\uc744 \ubc1c\uae09\ubc1b\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(2161).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(1298).Z})),(0,r.kt)("h3",{id:"azure-credentials"},"Azure Credentials"),(0,r.kt)("p",null,"Azure CLI\uc5d0 AKS\uac00 \uc788\ub294 Azure \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uc5ec ",(0,r.kt)("inlineCode",{parentName:"p"},"az ad sp create-for-rbac --sdk-auth")," \uc73c\ub85c creds \ubc1c\uae09 \ud6c4 \ub0b4\uc6a9\uc744 \uc0bd\uc785\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8692).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(66).Z})),(0,r.kt)("p",null,"\uc774\uc678 AKS\uac00 \uc874\uc7ac\ud558\ub294 \ub9ac\uc18c\uc2a4 \uadf8\ub8f9 \uc774\ub984\uacfc AKS \uc774\ub984\ub3c4 \uc0bd\uc785\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(469).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(5130).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8875).Z})),(0,r.kt)("h3",{id:"slack-webhook-url"},"Slack Webhook URL"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/series/workflows-with-aks-github-slack/slack-settings/#webhooks-%EC%83%9D%EC%84%B1"},"slack \uc124\uc815\uc758 webhooks \uc0dd\uc131")," \uc5d0\uc11c \uc0dd\uc131\ud55c Slack Webhook URL\ub3c4 \uc0bd\uc785\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(4905).Z})),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(3090).Z})),(0,r.kt)("h3",{id:"\ucd5c\uc885"},"\ucd5c\uc885"),(0,r.kt)("p",null,"\ubaa8\ub450 \ucd94\uac00\ub41c secrets\uc758 \uacbd\uc6b0 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(1432).Z})),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"repo\uc758 secrets\uc5d0\uc11c\ub3c4 org\uc5d0\uc11c \ucd94\uac00\ub41c secrets\uc758 \uc885\ub958\ub97c \uad6c\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",{parentName:"div"},(0,r.kt)("img",{src:n(8667).Z})))),(0,r.kt)("h2",{id:"cicd-\ud14c\uc2a4\ud2b8"},"CI/CD \ud14c\uc2a4\ud2b8"),(0,r.kt)("p",null,"\uc774\uc81c \uac1c\ubc1c \ud504\ub85c\uc138\uc2a4\uc5d0 \ub9de\uac8c CI/CD\uac00 \uc815\uc0c1\uc801\uc73c\ub85c trigger \ub418\ub294\uc9c0, aks\uc5d0 \uc815\uc0c1\uc801\uc73c\ub85c \ubc30\ud3ec\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{src:n(8278).Z})),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\ud639\uc2dc\ub77c\ub3c4 CI/CD\uc5d0\uc11c image pull fail\uc774 \ubc1c\uc0dd\ud55c\ub2e4\uba74 \ud574\ub2f9 image\uac00 public\ub85c \uc124\uc815\ub418\uc5b4\uc788\ub294\uc9c0 \ud655\uc778\ud574\ubcf4\uc138\uc694."),(0,r.kt)("p",{parentName:"div"},"Github Container Registry \ubc84\uadf8\uc778\uc9c0\ub294 \ubaa8\ub974\uaca0\uc9c0\ub9cc org level\uc5d0\uc11c ",(0,r.kt)("inlineCode",{parentName:"p"},"public")," \uc73c\ub85c \uc124\uc815\ud558\ub354\ub77c\ub3c4 \ucc98\uc74c publish\ub41c image\uc758 \uacbd\uc6b0 ",(0,r.kt)("inlineCode",{parentName:"p"},"private")," \uc774 \uae30\ubcf8\uc73c\ub85c \uc124\uc815\ub418\uc5b4 \ubc1c\uc0dd\ud55c \ubb38\uc81c\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."))),(0,r.kt)("h2",{id:"\ub9c8\ubb34\ub9ac"},"\ub9c8\ubb34\ub9ac"),(0,r.kt)("p",null,"\uc6cc\ud6c4 \ud83d\ude4c \uc774\ub807\uac8c \uc790\ub3d9\ud654\ub41c \uc6cc\ud06c \ud50c\ub85c\uc6b0 \uad6c\ucd95\uc744 \ubaa8\ub450 \uc644\ub8cc\ud588\uc2b5\ub2c8\ub2e4~~ \ud83e\udd73"),(0,r.kt)("p",null,"\uc5ec\uae30\uae4c\uc9c0 \ub530\ub77c\uc624\uc2dc\ub290\ub77c \uace0\uc0dd\ud558\uc168\uc2b5\ub2c8\ub2e4. \uc6cc\ud06c \ud50c\ub85c\uc6b0 \uad6c\ucd95 \ud6c4\uae30 \ubc0f \ud68c\uace0\ub294 \ub2e4\uc74c \ucc55\ud130\uc5d0\uc11c \ub098\ub220\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\ub05d\uae4c\uc9c0 \uc77d\uc5b4\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4 :) \ub2e4\uc74c \ucc55\ud130\uc5d0\uc11c \ubd2c\uc694~"))}k.isMDXComponent=!0},4280:function(e,t,n){t.Z=n.p+"assets/images/1-0-7de8114550054a88d87c785e08cd4189.png"},2161:function(e,t,n){t.Z=n.p+"assets/images/1-1-1b94d0a4d5dae43d975d35ecf823a4e0.png"},1432:function(e,t,n){t.Z=n.p+"assets/images/10-08b1229c11559439486a767e3499a50c.png"},8667:function(e,t,n){t.Z=n.p+"assets/images/11-d532db6d453e84b732dfd672f265fdf4.png"},8278:function(e,t,n){t.Z=n.p+"assets/images/12-d1b2d6977e3a60fc66ff30a94946d426.png"},1298:function(e,t,n){t.Z=n.p+"assets/images/2-8efa80b676462ea55a367296e999ee0c.png"},8692:function(e,t,n){t.Z=n.p+"assets/images/3-2a950acd7e22b881c0e5fb606cc2499f.png"},66:function(e,t,n){t.Z=n.p+"assets/images/4-fb1e6895fdde1724044c2a220ddb31b8.png"},469:function(e,t,n){t.Z=n.p+"assets/images/5-f8e601c430da92d90cd93c2016da7bf4.png"},5130:function(e,t,n){t.Z=n.p+"assets/images/6-62fd342672e18b3239c783a4a0ce47b2.png"},8875:function(e,t,n){t.Z=n.p+"assets/images/7-46d5cf75b611c3a1a6e90c92a551a001.png"},4905:function(e,t,n){t.Z=n.p+"assets/images/8-133986620a5311b82896bb5dc3237bfe.png"},3090:function(e,t,n){t.Z=n.p+"assets/images/9-14085f144b37110420b7f2e784fd09d4.png"}}]);