{"componentChunkName":"component---src-templates-blog-post-js","path":"/golang/lets-create-an-http-cache-server-with-golang/","result":{"data":{"site":{"siteMetadata":{"title":"Parkgang Dev Log","author":"parkgang","siteUrl":"https://parkgang.github.io","comment":{"disqusShortName":"","utterances":"parkgang/parkgang.github.io"},"sponsor":{"buyMeACoffeeId":"parkgang"}}},"markdownRemark":{"id":"ed9591e7-1e37-5574-be60-c11ca46279db","excerpt":"Overview HTTP Cache에 대해서 찾아보면 대부분 각 Header가 어떻게 동작하는지에 대해 중점으로 알려줍니다. 어떻게 보면 Client와 Server가 HTTP Spec에 규정된 Header 값을 바탕으로 캐시하는 것이 전부이긴 하지만 Header 값을 실제 프로그램이 어떻게 읽어서 처리하느냐도 중요합니다. 필자는 HTTP Cache를 공부할 때 Header에 대한 내용만 나오고 그 Header를 어떤 로직으로 보내는지 서버는 Header…","html":"<h1 id=\"overview\" style=\"position:relative;\"><a href=\"#overview\" aria-label=\"overview permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Overview</h1>\n<p>HTTP Cache에 대해서 찾아보면 대부분 각 Header가 어떻게 동작하는지에 대해 중점으로 알려줍니다.</p>\n<p>어떻게 보면 Client와 Server가 HTTP Spec에 규정된 Header 값을 바탕으로 캐시하는 것이 전부이긴 하지만 Header 값을 실제 프로그램이 어떻게 읽어서 처리하느냐도 중요합니다.</p>\n<p>필자는 HTTP Cache를 공부할 때 Header에 대한 내용만 나오고 그 Header를 어떤 로직으로 보내는지 서버는 Header를 읽어서 어떻게 하는지 로직적으로 살펴볼 수 없어서 이해가 너무 힘들었습니다.</p>\n<p>특히, <code class=\"language-text\">ETag</code> 부분은 도데체 어떤 경우에 생기며 <code class=\"language-text\">ETag</code> 가 변경되는 기준은 무엇이며 검증은 어떤 식으로 하는지 너무 답답했습니다.</p>\n<p>이에 따라 직접 캐시 서버를 만들어서 이해하기로 결심했고 <a href=\"https://www.sanarias.com/blog/115LearningHTTPcachinginGo\">Learning HTTP caching in Go</a> 글을 기준으로 잡고 간단한 캐시 서버를 제작하게 되었습니다.</p>\n<h1 id=\"시작하기-전에\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-%EC%A0%84%EC%97%90\" aria-label=\"시작하기 전에 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시작하기 전에</h1>\n<p>해당 글에서는 HTTP Cache와 관련된 Header에 대해서 자세히 설명하지 않으며 HTTP Cache와 관련된 Header가 어떻게 Request되고 Server는 어떤 식으로 처리되는지를 그에 대한 효율성을 중점적으로 서술합니다.</p>\n<h1 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h1>\n<ol>\n<li>HTTP Cache Header는 HTTP로 통신하는 주체들이 캐시를 처리하기 위한 하나의 interface일 뿐 그것에 대한 처리 로직을 구현하는 것은 Client (browser) 와 Server (web server) 입니다.</li>\n<li><code class=\"language-text\">Express.js</code> 니 <code class=\"language-text\">ASP.NET Core</code> 과 같은 상용화 된 웹 서버 제품을 사용하는 경우 캐시 관련 해더를 처리하는 부분은 블랙박스 영역이라고 생각하면 됩니다.</li>\n</ol>\n<h1 id=\"요구사항\" style=\"position:relative;\"><a href=\"#%EC%9A%94%EA%B5%AC%EC%82%AC%ED%95%AD\" aria-label=\"요구사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>요구사항</h1>\n<ol>\n<li>우선 캐시가 적용된 경우와 적용되지 않은 경우를 보기 쉽도록 이미지 파일을 읽어오는 API를 만들고 가장 궁금했던 <code class=\"language-text\">ETag</code> 처리 로직을 위해서 텍스트 파일을 읽어오는 API를 만들도록 합니다.</li>\n<li>이미지 API의 경우 제일 단순하게 <code class=\"language-text\">Cache-Control</code> Header를 통해서 <code class=\"language-text\">max-age</code> 만을 가지고 캐시 적용 유무 차이를 볼 것이고</li>\n<li>텍스트 API의 경우 파일이 수정될 때마다 <code class=\"language-text\">ETag</code> 값을 변경하여 Response 하는 로직과 함께 <code class=\"language-text\">Cache-Control</code> Header로 시간에 따른 캐시 변화도 볼 것입니다.</li>\n</ol>\n<h1 id=\"코드를-보여주세요\" style=\"position:relative;\"><a href=\"#%EC%BD%94%EB%93%9C%EB%A5%BC-%EB%B3%B4%EC%97%AC%EC%A3%BC%EC%84%B8%EC%9A%94\" aria-label=\"코드를 보여주세요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>코드를 보여주세요</h1>\n<blockquote>\n<p>아래에 사용된 코드는 <a href=\"https://github.com/parkgang/http-cache-server-with-go\">parkgang/http-cache-server-with-go</a> 에서 살펴보실 수 있습니다.</p>\n</blockquote>\n<h2 id=\"maingo\" style=\"position:relative;\"><a href=\"#maingo\" aria-label=\"maingo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>main.go</h2>\n<ol>\n<li>HTTP Cache를 이해하기 위한 간단한 서버라서 로직은 모두 <code class=\"language-text\">main.go</code> 에 몰아져있습니다.</li>\n<li>\n<p>endpoint는 <code class=\"language-text\">/image</code>, <code class=\"language-text\">/text</code> 2가지가 있고 위에서 말한 이미지와 텍스트를 조회하는 API 입니다.</p>\n<ol>\n<li>이미지의 경우 메모리 상에서 생성하고 응답할 것이며</li>\n<li>텍스트의 경우 <code class=\"language-text\">assets</code> 디렉터리에 있는 <code class=\"language-text\">note.txt</code> 파일을 사용할 것입니다.</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">Cache-Control</code> Header의 경우 이미지와 텍스트 모두 동일하게 <code class=\"language-text\">private, max-age=5</code> 가 적용됩니다.</p>\n<ol>\n<li>확실한 테스트를 위해 브라우저만 캐시되도록 <code class=\"language-text\">private</code> 을 지정하였고</li>\n<li>캐시 적용 유무를 빠르게 보기 위하여 아주 짧은 시간인 <code class=\"language-text\">max-age</code> 를 5초로 지정하였습니다.</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">ETag</code> 의 경우 만드는 방법이 여러가지 있는 것으로 알지만 가장 단순하게 파일이 수정된 일자를 MD5 해시 함수를 이용하여 생성하였습니다.</p>\n<ol>\n<li>이로써 파일이 수정될 때마다 (파일을 그냥 저장할 때도 해당) 수정된 일자가 변경되어서 <code class=\"language-text\">ETag</code> 가 계속 변하게 될 것입니다.</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">r.Header.Get(\"If-None-Match\")</code> 쪽 코드를 보면 <code class=\"language-text\">ETag</code> 를 검증하는 로직이 있는데 request header에 <code class=\"language-text\">If-None-Match</code> 값이 존재하고 request한 <code class=\"language-text\">ETag</code> 와 현재 파일의 <code class=\"language-text\">ETag</code> 를 구해서 비교 후 같으면 <code class=\"language-text\">304</code> 를 응답하는 코드입니다.</p>\n<blockquote>\n<p>물론 제품 수준의 퀄리티는 아니지만 메커니즘 이해를 위한 구현은 이렇게 쉬운데 이 부분이 블랙박스로 처리되어 참으로 이해가 어려웠습니다.</p>\n</blockquote>\n</li>\n<li>또한, 각각의 API가 실제로 호출 여부를 확인하기 위해서 호출 시 응답 전에 console에 글자를 출력하도록 코딩되어 있습니다.</li>\n</ol>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">\"bytes\"</span>\n\t<span class=\"token string\">\"crypto/md5\"</span>\n\t<span class=\"token string\">\"flag\"</span>\n\t<span class=\"token string\">\"fmt\"</span>\n\t<span class=\"token string\">\"image\"</span>\n\t<span class=\"token string\">\"image/color\"</span>\n\t<span class=\"token string\">\"image/draw\"</span>\n\t<span class=\"token string\">\"image/jpeg\"</span>\n\t<span class=\"token string\">\"io/ioutil\"</span>\n\t<span class=\"token string\">\"log\"</span>\n\t<span class=\"token string\">\"net/http\"</span>\n\t<span class=\"token string\">\"os\"</span>\n\t<span class=\"token string\">\"strconv\"</span>\n\t<span class=\"token string\">\"strings\"</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> root <span class=\"token operator\">=</span> flag<span class=\"token punctuation\">.</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"./assets\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"file system path\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\thttp<span class=\"token punctuation\">.</span><span class=\"token function\">Handle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">FileServer</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">.</span><span class=\"token function\">Dir</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\thttp<span class=\"token punctuation\">.</span><span class=\"token function\">HandleFunc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/image\"</span><span class=\"token punctuation\">,</span> imageHandler<span class=\"token punctuation\">)</span>\n\thttp<span class=\"token punctuation\">.</span><span class=\"token function\">HandleFunc</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/text\"</span><span class=\"token punctuation\">,</span> textHandler<span class=\"token punctuation\">)</span>\n\n\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Listening on 8080\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">:=</span> http<span class=\"token punctuation\">.</span><span class=\"token function\">ListenAndServe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":8080\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Fatal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ListenAndServe:\"</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">imageHandler</span><span class=\"token punctuation\">(</span>w http<span class=\"token punctuation\">.</span>ResponseWriter<span class=\"token punctuation\">,</span> r <span class=\"token operator\">*</span>http<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tm <span class=\"token operator\">:=</span> image<span class=\"token punctuation\">.</span><span class=\"token function\">NewRGBA</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">.</span><span class=\"token function\">Rect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">240</span><span class=\"token punctuation\">,</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token comment\">// 검은색 이미지 생성</span>\n\ttempImage <span class=\"token operator\">:=</span> color<span class=\"token punctuation\">.</span>RGBA<span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">}</span>\n\tdraw<span class=\"token punctuation\">.</span><span class=\"token function\">Draw</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span> m<span class=\"token punctuation\">.</span><span class=\"token function\">Bounds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>image<span class=\"token punctuation\">.</span>Uniform<span class=\"token punctuation\">{</span>tempImage<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">.</span>Point<span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> draw<span class=\"token punctuation\">.</span>Src<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\">// jpeg 형식으로 이미지를 인코딩하고 ResponseWriter에 writes 합니다.</span>\n\t<span class=\"token keyword\">var</span> img image<span class=\"token punctuation\">.</span>Image <span class=\"token operator\">=</span> m\n\tbuffer <span class=\"token operator\">:=</span> <span class=\"token function\">new</span><span class=\"token punctuation\">(</span>bytes<span class=\"token punctuation\">.</span>Buffer<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">:=</span> jpeg<span class=\"token punctuation\">.</span><span class=\"token function\">Encode</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">,</span> <span class=\"token boolean\">nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unable to encode image.\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이미지 응답\"</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache-Control\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"private, max-age=5\"</span><span class=\"token punctuation\">)</span></span>\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"image/jpeg\"</span><span class=\"token punctuation\">)</span>\n\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Length\"</span><span class=\"token punctuation\">,</span> strconv<span class=\"token punctuation\">.</span><span class=\"token function\">Itoa</span><span class=\"token punctuation\">(</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">.</span><span class=\"token function\">Bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token boolean\">_</span><span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> w<span class=\"token punctuation\">.</span><span class=\"token function\">Write</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">.</span><span class=\"token function\">Bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unable to write image.\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">func</span> <span class=\"token function\">textHandler</span><span class=\"token punctuation\">(</span>w http<span class=\"token punctuation\">.</span>ResponseWriter<span class=\"token punctuation\">,</span> r <span class=\"token operator\">*</span>http<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tfilename <span class=\"token operator\">:=</span> <span class=\"token string\">\"./assets/note.txt\"</span>\n\n\t<span class=\"token comment\">// 마지막 수정 시간 가져오기</span>\n\tfile<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> os<span class=\"token punctuation\">.</span><span class=\"token function\">Stat</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n\tmodifiedtime <span class=\"token operator\">:=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">ModTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\tetag <span class=\"token operator\">:=</span> fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%x\"</span><span class=\"token punctuation\">,</span> md5<span class=\"token punctuation\">.</span><span class=\"token function\">Sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token function\">byte</span><span class=\"token punctuation\">(</span>modifiedtime<span class=\"token punctuation\">.</span><span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Etag\"</span><span class=\"token punctuation\">,</span> etag<span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache-Control\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"private, max-age=5\"</span><span class=\"token punctuation\">)</span></span>\n\t<span class=\"token comment\">// etag가 변하지 않았다면 304 응답</span>\n<span class=\"gatsby-highlight-code-line\">\t<span class=\"token keyword\">if</span> match <span class=\"token operator\">:=</span> r<span class=\"token punctuation\">.</span>Header<span class=\"token punctuation\">.</span><span class=\"token function\">Get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"If-None-Match\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> match <span class=\"token operator\">!=</span> <span class=\"token string\">\"\"</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">\t\t<span class=\"token keyword\">if</span> strings<span class=\"token punctuation\">.</span><span class=\"token function\">Contains</span><span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">,</span> etag<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">\t\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"etag가 변하지 않았음으로 304 응답\"</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">\t\t\tw<span class=\"token punctuation\">.</span><span class=\"token function\">WriteHeader</span><span class=\"token punctuation\">(</span>http<span class=\"token punctuation\">.</span>StatusNotModified<span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">\t\t\t<span class=\"token keyword\">return</span></span><span class=\"gatsby-highlight-code-line\">\t\t<span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">\t<span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"></span>\t<span class=\"token comment\">// 파일을 읽은 후 응답</span>\n\tdat<span class=\"token punctuation\">,</span> err <span class=\"token operator\">:=</span> ioutil<span class=\"token punctuation\">.</span><span class=\"token function\">ReadFile</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">if</span> err <span class=\"token operator\">!=</span> <span class=\"token boolean\">nil</span> <span class=\"token punctuation\">{</span>\n\t\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n\tlog<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"파일 응답\"</span><span class=\"token punctuation\">)</span>\n\tfmt<span class=\"token punctuation\">.</span><span class=\"token function\">Fprint</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">,</span> <span class=\"token function\">string</span><span class=\"token punctuation\">(</span>dat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"assetsnotetxt\" style=\"position:relative;\"><a href=\"#assetsnotetxt\" aria-label=\"assetsnotetxt permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>assets/note.txt</h2>\n<ol>\n<li>텍스트 API에서 응답할 때 사용되는 텍스트 파일인데 일부로 <code class=\"language-text\">3MB</code> 으로 무겁개 해서 캐시 효과가 얼마나 큰지 알 수 있도록 디자인하였습니다.</li>\n<li>또한, <code class=\"language-text\">304</code> 응답 시 얼마나 응답 바디가 작은지 확인할 수 있습니다.</li>\n</ol>\n<h2 id=\"assetsindexhtml\" style=\"position:relative;\"><a href=\"#assetsindexhtml\" aria-label=\"assetsindexhtml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>assets/index.html</h2>\n<ol>\n<li>Server API를 소비하는 Client 웹 페이지 입니다.</li>\n<li><code class=\"language-text\">이미지 요청</code> 버튼을 누르면 이미지를 조회해서 보여주고</li>\n<li><code class=\"language-text\">텍스트 요청</code> 버튼을 누르면 텍스트를 조회해서 보여주는 아주 간단한 웹 페이지 입니다.</li>\n</ol>\n<blockquote>\n<p>독자분들은 아시나요…? 정적 파일 요청을 브라우저의 URL에 직접 넣어서 요청하면 캐시 되지 않는다는 것을…🥲</p>\n<p>분명 캐시가 적용된 URL인데 계속 요청을 해도 캐시되지 않고 새롭게 응답받길래 왜 그러지 하고 트러블 슈팅을 해보니 브라우저 URL에 직접 넣어서 호출해서 그렇더군요<br>\n그래서 아래와 같이 간단한 웹 페이지를 만들어서 호출할 수 있도록 디자인하였습니다.<br>\n에초에 GUI라서 확인하기도 쉬우실 꺼에요!</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ko<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Document<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n      <span class=\"token selector\">.text-area</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 240px<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 240px<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid black<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">handleGetImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>이미지 요청<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>이미지가 표시 안됨<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">handleGetTxt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>텍스트 요청<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-area<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handleGetImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/image</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> imageBlob <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">blob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> imageObjectURL <span class=\"token operator\">=</span> <span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">createObjectURL</span><span class=\"token punctuation\">(</span>imageBlob<span class=\"token punctuation\">)</span>\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'image'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> imageObjectURL\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HTTP-Error: '</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">handleGetTxt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/text</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text-area'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> text\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HTTP-Error: '</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"원하는-대로-동작하는지-확인해보자\" style=\"position:relative;\"><a href=\"#%EC%9B%90%ED%95%98%EB%8A%94-%EB%8C%80%EB%A1%9C-%EB%8F%99%EC%9E%91%ED%95%98%EB%8A%94%EC%A7%80-%ED%99%95%EC%9D%B8%ED%95%B4%EB%B3%B4%EC%9E%90\" aria-label=\"원하는 대로 동작하는지 확인해보자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원하는 대로 동작하는지 확인해보자</h1>\n<h2 id=\"서버-실행\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89\" aria-label=\"서버 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버 실행</h2>\n<ol>\n<li>자 이제 캐시가 잘 되는지 확인해볼까요? 위에서 말한 repo에서 소스코드를 clone 받고 <code class=\"language-text\">go run main.go</code> 으로 서버를 시작해 봅시다.</li>\n<li>\n<p>캐시 여부를 편리하기 보기위해서 저는 친숙한 <code class=\"language-text\">Chrome</code> 을 사용하도록 하겠습니다.</p>\n<blockquote>\n<p>대부분 비슷하긴 하지만 <code class=\"language-text\">Chrome</code> 이 아니여도 디버깅이 편하신 분은 다른 브라우저를 사용하셔도 됩니다.</p>\n</blockquote>\n</li>\n<li>그리고 <a href=\"http://localhost:8080\">http://localhost:8080</a> 주소로 접속하고 개발자 도구를 켜주세요! 아마 아래와 같이 화면이 될 것 입니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACkUlEQVQ4y42TzU8TQRiHNyGBC8ak9QNL2+3XfvVz291tu10oEK8ebGDV+ieYeJF4JN5EJNw9IIlE5UITEA4Q/hy5ELh1A/2Yzus7y7YRW8VJnryzM5NnfzOzy+Uj0n0jJzwrFItLVqVq5/K6bZQtWxRlOxTibZ6P2mFGOOJWPhLD8et+YDpkBwIhe+pRcImPxJ8LojLFxSOJp6l8FrKaAWqhCMlkFuJRAWKCAoKchoSYQpKQkLwqyCDJrK+AmtfBKJmgG2UwrXlQlPQL7s3y29rG1ifY/Lbd/bq7S3a+75DGl23y6vUySeszJG8ukLRmkpRmEc2skoJWJKY1R1Qcs2YXSLFsEbMy36nOPcYwmTq3/2O/dvrzFDqtdg8AaJ+tzc9UVtLUMMp0ZnaOzlbnacWq0mKpQjW9RFFM1YJBVVXHWiSpdA7TS3Vub2+v1mw2gRDS63a71HEcYO3j+gYEw1FIprIgKxkXCY8AXwISIiczoFxDkZ7IjkGQ69zh4WGt0+kwh5uw1Wq5wverH8B/7yHE4iJEognAQx+qHhTpsbHAdLjOHRwc1Nrt9pBwdXXthvAfUKTH5NNBT3h1dTXY8uXlpZdwtLCf7K/Co6OjGoqAUtrDRll/lPBPUZiP9Z9vCo+Pj2soGmwZkw4J2WL2/bFLULUSZHIaiFISojF3bljoSXqYcmRCtjgaE1zEpAqClHH7XvLhLTMhugjbNjtHlhRvmaKQopB6N+mCvxzl+djvY0xGBsKTk5NFGNHW1tbdhPGEdNstD0DhS67RaDw5Pz/vXlxcNBHn7OzMabdazsrKO8fnf+DgQgdT3UYT6T4KBBe5iYmJOz6fT0OMPn6/35icnDTGx8cNnP9f9LGxsbu/AAjLKXw26BDBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"1\"\n        src=\"/static/e44ca94d8d18e2ff5a5fecd1b376561f/c1b63/1.png\"\n        srcset=\"/static/e44ca94d8d18e2ff5a5fecd1b376561f/5a46d/1.png 300w,\n/static/e44ca94d8d18e2ff5a5fecd1b376561f/0a47e/1.png 600w,\n/static/e44ca94d8d18e2ff5a5fecd1b376561f/c1b63/1.png 1200w,\n/static/e44ca94d8d18e2ff5a5fecd1b376561f/d61c2/1.png 1800w,\n/static/e44ca94d8d18e2ff5a5fecd1b376561f/97a96/1.png 2400w,\n/static/e44ca94d8d18e2ff5a5fecd1b376561f/e16b4/1.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></li>\n</ol>\n<h2 id=\"이미지-캐시-확인\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%BA%90%EC%8B%9C-%ED%99%95%EC%9D%B8\" aria-label=\"이미지 캐시 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 캐시 확인</h2>\n<p>우선 <code class=\"language-text\">이미지 요청</code> 버튼을 클릭해 볼까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC+ElEQVQ4y6WUS08TURTHZ9UmEKwW0UJpp+08OjOdDm2nM7QUaNGtC0eoWknUuDAxdEP8BPiA8tAgS40r3YIJjx1fiMCOhgK9c4/nTqHRSNh4kn/u/56Z+5tz77kZzohKA5lU4rGRM2dG7bGqbmSrVqFUlWWlGonwVZ6PV6NM0Zg38rEE5jt+KBypDg1FqqHB4Rk+JjyRZDXEyYL8MGfnwCwUwRotgWHkIBEXQZBUkBQdRDmF0kBMXoySAkmFeRUy2TyuKULeKkCxVAFV1Z9yr17POXMLC/D+02q7sb5ONr5skF8/fpI39bckZY6TbPEe0c0i+hIxi5MkZ9qkWCqTDOZKE1PELpRIcaxyPlm+D5qWrnHPX7x0QqEwDIYG3ZuBAJ2dnaUAQL9//UaxEmpZBTo+UaaTk1N0bLxM7dExauZHqWnaNJuzaCaTp5mcTVL6CEhSssZNTz9y/H4fcBznomilUgEWjZU1CEdioGppb4sySkpqICc7XsbjYPmkolNFS7syPhNEBDoYCOoCxycmPODq2meI8HG2DVBUHVK64QmbBpqiwYiagnQ6A6o+QrEyBKqADatx9XrdYVWVy2XXtm06Pz/vAVdW1yCeEMEYyXogVdNBS6VBQ69IMhiKig3MgKzpVBAkVxRliPKxGre1teUcHBzA+fm5i0FPT0894MfFBtwKDkAsLuGLCfy64KnjRYgwz3J8gmLeZc+GwtEat7u76xBCGMNlzWi1OsClpWXovx2ChCAjVMRqJU/MX+piTlEum4eHEbizs+OcnZ15QIrRarU84KIHvNsFXqUrgdvb2w7bJrK8LZ+cnPwfcG9vz2FVtdttws4RvXcPF5caFIEUgfRi0T9C4CWMdIH7+/vTcEU0llcg2H/Hq5Ad+DUVdoXAZ9zm5uaDw8PD9tHR0TGqiR1v4hE0F959aIaH+aaaMpp4aZt4aZsI/0uC2PXHqDb+TKY5v9/fFwwGTZT1pwKBgNXX12fduNEZe3p6UT3XqDfv8/kCvwF5ev6nbuv7pgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2\"\n        title=\"2\"\n        src=\"/static/e1f225bdee96d2cbc7c1b93c77667119/c1b63/2.png\"\n        srcset=\"/static/e1f225bdee96d2cbc7c1b93c77667119/5a46d/2.png 300w,\n/static/e1f225bdee96d2cbc7c1b93c77667119/0a47e/2.png 600w,\n/static/e1f225bdee96d2cbc7c1b93c77667119/c1b63/2.png 1200w,\n/static/e1f225bdee96d2cbc7c1b93c77667119/d61c2/2.png 1800w,\n/static/e1f225bdee96d2cbc7c1b93c77667119/97a96/2.png 2400w,\n/static/e1f225bdee96d2cbc7c1b93c77667119/e16b4/2.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위와 같이 요청 후 서버에서 응답된 것을 확인할 수 있네요 응답 받은 이미지 용량은 <code class=\"language-text\">1.6kB</code> 이라고 하네요! 그럼 바로 한번 더 빠르게 <code class=\"language-text\">이미지 요청</code> 버튼을 클릭해 볼까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADAklEQVQ4y52STU/bQBCGfSISCFJBPyAkceI4tmMbk9ixiQmQ0HMPdSFtU6S2Ug9VpVxof0GhagMUQbmintorVOLjxh9CcCMiQNY7nXUSRD/UQ1d6NbNrzbPvzJobj6fv5DThsWFa8xPOZEU3chW7UKxIklKJxfgKzycrcaZ4Ioh8QsDzdh4ZjVUikVhleCQ6zydST9JSZpiTBOmh6ZhgFVywJ4pgGCYISRFS6QykFR1ESUOpIMqdmFZAVliegWwujzUu5O0CuMUyZDL6U+7V65pXW1qG5fXPrfrmBtn6skV+fPtO3tTeEc2aIjl3luiWi3mRWO4MMS2HuMUZksWz4nSZOIUicSfLVzOl+6BqY1Xu+YuXHlqGkZGIfyscpgsLCxQA6NftbaooOrWdAp2eLtOZ0iwtTpUoAqiVnwiUMx2KLlkk+lgW3ctVbm7ukRcK9QDHcT6KlstlYKu+sgaxuACqPg6KOtZWhkkP8oxqoDBqBlW1cV/Gc0GUqpyHC0HXwKmp6QC4urYOo1E+AMiKGhRjS6DhBZKs4rmGe4N9p+jMl3Cm+GBVrlarecxVqVTyHcehi4tvA+DGxibougG244Bp5SGbzYFpWpDH/bimgps1wHUnQRszqCRJviwrIKRSVW53d9c7Pj6Gq6srHxe9uLhot1xfhZFILHDIXjYlSmxGWCSBIIggptKQlhRICiJNJkUfBdF4osodHBx4hBDG8NljNJtt4MdPdRgcuosFaWwlBQksYGI534mdM4ry+YSII4pXuf39fe/y8jIAUlzNZrMDXIGh2/cCR13Y72KXdYFsH43yVW5vb89jbSIraPn8/Py/gYHDw8NDj7lqtVqEzRHz4D/ElikCKQJpp+gPIbALI20gOjw6OpqDv6z6yirOsO3w5gz/4vBa2PIzbmdn58HJyUnr9PT0DNXAF2/gCBrvlz408MYG/msNSdEaKVFuIPwX4ct38zNUKxZPzHGhUKh/cHDQQtk3FQ6H7f7+fntggMUBu7e3D9X7D/Xle3p6wj8BBgkAbmxFzzAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3\"\n        title=\"3\"\n        src=\"/static/76e008b4dbec18a892bfc86df9da8a59/c1b63/3.png\"\n        srcset=\"/static/76e008b4dbec18a892bfc86df9da8a59/5a46d/3.png 300w,\n/static/76e008b4dbec18a892bfc86df9da8a59/0a47e/3.png 600w,\n/static/76e008b4dbec18a892bfc86df9da8a59/c1b63/3.png 1200w,\n/static/76e008b4dbec18a892bfc86df9da8a59/d61c2/3.png 1800w,\n/static/76e008b4dbec18a892bfc86df9da8a59/97a96/3.png 2400w,\n/static/76e008b4dbec18a892bfc86df9da8a59/e16b4/3.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이번에는 뭔가 요청이 된거 같으나 응답 부분의 용량이 <code class=\"language-text\">(디스크 캐시)</code> 인 것을 확인할 수 있습니다. 네, 그렇습니다 캐시되서 그렇습니다. 🤭 네트워크 요청 내역을 자세히 봐볼까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACZklEQVQ4y41UyZLaQAz1f2QGY4x30+22jVeGPck9Oc0xH5CqXHLI17/oNVA1Q4DMQaVe1Grp6UlOXzdQpoE2SzTdgIUqEccpknSBsm5RLTuUVYNadGFq5ItCbGuxM1AiSV4i00voorT3ztCNUEUlhmKgS7ysd9gfvmCzO2K13qNpR3tuSj6qrPBTap7TidYGaabsZ86yGaxxP6ytAaUf16ib3hrwnDaMiFFyn8k574fV1kZrqhbLboUgiOE8PU/xNPEwmfqYuDNw757Xn55cPMsdhefUF5t3a3cO15vbdw5/C8IEYZRaHcU5pp6P2WxuIySWTIcSy5p2YZydtEj0Zk1xmrYX4Bt5rCRdI9gYHI6fBb8NNtu9YLnHdn/A/ii4bnbo+xHDcF8c9f0nzOtvRN9+YfH6B/7XH6gE8K04rEopQJKjWGgUqrAReLMAMz+w+pY4c0mTqUTJAomk5cu+SjKsjEKnc7RphjIIoHzf4kacHonjCrCTM8An7UnFRtSkC/kpHIxShVA+THNtcZ5KAe6Jc30wEXkRsq+NwaA0uixHHcdo0hS+pPTI2U2HDDsT3EaJshOuNeI8FwjieWir/9+Ubzms2wGlkFiXjeheUia+GvMgsfcfjvDySyU9zM4g98jDRDAk32hzr7pTL3iQcs7WGrCUwnBA6KK2DCBtLLnPZI4EGkoYZfJuZgt70yGjYz/3o3BRUqZDOmEXUQfsKtsZmY2eOqZzuf8nZepYKEInuTJWcwAUnDYy4jhpgjAF+Xtq1exd6zrXVbrgxPAvaVzLW/vrvcP0MiEs5xsj4kDwPsC3e/IXTi4X9drORL0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"4\"\n        title=\"4\"\n        src=\"/static/f78d131dad04ce7efd3101a0ef6d9e01/c1b63/4.png\"\n        srcset=\"/static/f78d131dad04ce7efd3101a0ef6d9e01/5a46d/4.png 300w,\n/static/f78d131dad04ce7efd3101a0ef6d9e01/0a47e/4.png 600w,\n/static/f78d131dad04ce7efd3101a0ef6d9e01/c1b63/4.png 1200w,\n/static/f78d131dad04ce7efd3101a0ef6d9e01/1acf3/4.png 1596w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>응답 header에 <code class=\"language-text\">Cache-Control: private, max-age=5</code> 가 존재하는 것을 볼 수 있습니다. 이미지 조회 API에 넣어 둔 header인 것을 알 수 있습니다. 앞으로 5초 동안은 해당 URL 요청에 대해서 Server에 물어보지 않고 브라우저 캐시를 사용합니다.</p>\n<p>중요한 것은 네트워크 탭에는 <strong>마치 요청된 것</strong> 같아 보이지만 실제로는 <strong>Server에 요청하지 않는</strong> 다는 것 입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAmklEQVQI1y3FuwqCYACAUd+jxNvS8FuZuKUoFUFQ0dKY2mKDQ0NelobwCXqCMuxCL/nl0HA4Ulw+icsXYdEQtfZlQ1w8SC9fkvOHKLsT5TVhVrff2BVvTseE6mBTpS7X3GcaOOg9h/7QRfKCNfPFFi9Y4baC2Yaxv8RyJoihh6xZqIaNYoz+bDRjgG4IVE2g6SayKugogq5i8gNYBk1TRsYWIgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"5\"\n        title=\"5\"\n        src=\"/static/c81543ff2b6c5a6f78c58c86ef6a54f4/c1b63/5.png\"\n        srcset=\"/static/c81543ff2b6c5a6f78c58c86ef6a54f4/5a46d/5.png 300w,\n/static/c81543ff2b6c5a6f78c58c86ef6a54f4/0a47e/5.png 600w,\n/static/c81543ff2b6c5a6f78c58c86ef6a54f4/c1b63/5.png 1200w,\n/static/c81543ff2b6c5a6f78c58c86ef6a54f4/fbf76/5.png 1252w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Server Console을 보니까 요청이 1회 들어온 것을 확인할 수 있습니다.</p>\n<blockquote>\n<p>앗, 혹시라도 1회 이상 요청되었나요? 그렇다면 2가지를 의심하셔야 합니다.</p>\n<p>첫번째로 브라우저 개발자 도구에 <code class=\"language-text\">캐시 사용 중지</code> 체크 박스가 해재되어있는지 확인해주세요. 해당 체크박스가 체크되어 있으면 캐시되지 않습니다ㅠㅠ</p>\n<p>두번째로 <code class=\"language-text\">max-age</code> 값을 올리시거나 아니면 더 빨리 버튼을 클릭해 보세요 빠른 테스트를 위해서 캐시 시간을 5초로 지정하였는데 5초가 지나면 해당 URL의 캐시는 무효화 되어 Server에게 다시 요청을 보내게 됩니다. 해당 경우가 아닌지 한번 확인해보세요</p>\n</blockquote>\n<p>이외 아래의 RGBA 값과 <code class=\"language-text\">max-age</code> 값을 바꾸면서 테스트 해보세요. 첫 조회된 <code class=\"language-text\">max-age</code> 시간 동안은 색상 값을 변경하더라도 조회되지 않지만 <code class=\"language-text\">max-age</code> 가 지나면 변경되는 것을 확인할 수 있습니다.</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">func</span> <span class=\"token function\">imageHandler</span><span class=\"token punctuation\">(</span>w http<span class=\"token punctuation\">.</span>ResponseWriter<span class=\"token punctuation\">,</span> r <span class=\"token operator\">*</span>http<span class=\"token punctuation\">.</span>Request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token operator\">...</span>\n\t<span class=\"token comment\">// 검은색 이미지 생성</span>\n<span class=\"gatsby-highlight-code-line\">\ttempImage <span class=\"token operator\">:=</span> color<span class=\"token punctuation\">.</span>RGBA<span class=\"token punctuation\">{</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">}</span></span>\t<span class=\"token operator\">...</span>\n<span class=\"gatsby-highlight-code-line\">\tw<span class=\"token punctuation\">.</span><span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">Set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Cache-Control\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"private, max-age=5\"</span><span class=\"token punctuation\">)</span></span>\t<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"텍스트-캐시-확인\" style=\"position:relative;\"><a href=\"#%ED%85%8D%EC%8A%A4%ED%8A%B8-%EC%BA%90%EC%8B%9C-%ED%99%95%EC%9D%B8\" aria-label=\"텍스트 캐시 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>텍스트 캐시 확인</h2>\n<blockquote>\n<p>텍스트 확인 전 혹시 모르니까 캐시를 모두 날리면서 테스트 하세요. 개발자 도구를 활성화한 상태에서 새로고침 버튼에서 오른쪽 마우스를 클릭하면 아래와 같이 강력 세로고침 매뉴을 볼 수 있습니다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAClklEQVQ4y42TS08TURTHJyGhG4xJ6wP6mr5mpu8O8yrT0hbi1oUNjFo/gMbvIBqNUgk7jZFNZeMWXMACrJ8DPwOBHQX6uHOP5w5DFQviTf65Z+6585v/OfcOp0Sk21pBeJhXlMWiUbIy2YIlT2uWIKYsPhKz+HDECvNRK+zObC0UOov9gZDl94esyangIh+JP8J3JrkoH3uQV2QwZ2tQNCugaEXI5RXAJMTiEiSkDCTE9O9ZSIKUZHEK8MOgF03Q9Bkwy3OQSmUfcy9ev6m/XG2CoWiD6WyeSHGBBEMRIoopIqtFIs/Mk6xqkoxaJqpZJYpqELNcw5xJypV5YsyUiVma61dr9yCdzjW47z/a9Z97e7C+tmZ/bbXol7XPtNVap0+fPafTik5VzaCzlRqtVOdoqVylRrGEa0WKYCpjXpY1nA2CrUL3UoP7trlZPz4+Bhw2ioI7Pnz8BIEgD+lMAZKpLCqHpWadWGLP6RykzkRRtsjaICQb3Pb2dr3f74ONgxBCXTi8fdcE36272EcRItEEYNNHZlcUZbM1fyDc4La2tuq9Xm/osNvtOsBmc+UC8B+iKJvBA0EXeHp6CujOHgwG9OTkxAEuXwE8d3YlcGdnp44goJSyqimLLwP+DQrzsfPni8Dd3d06goYlo9MRINvM7h87BLxKkCuoIEppiMac3CjQhdjo8lKHbHM0JjgS0zIIUs6JXeejJTMgsggrm/WROV1uvqcIpAik7kk6wl+O8nzszzUGI0Ngu91egEvGysqq4zCekK475aEQ+ITb2Ni4f3BwMDg8PDxCdfb39zu9breztPSq4/Xd6eDGDrq6TkeowZQ/uMB5PJ4bXq9XRenn8vl8+sTEhD4+Pq5j/n+ljY2N3fwFI8IeAdNDGfUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"6\"\n        title=\"6\"\n        src=\"/static/ea24f6714ecbc676f1d1cf29de227e22/c1b63/6.png\"\n        srcset=\"/static/ea24f6714ecbc676f1d1cf29de227e22/5a46d/6.png 300w,\n/static/ea24f6714ecbc676f1d1cf29de227e22/0a47e/6.png 600w,\n/static/ea24f6714ecbc676f1d1cf29de227e22/c1b63/6.png 1200w,\n/static/ea24f6714ecbc676f1d1cf29de227e22/d61c2/6.png 1800w,\n/static/ea24f6714ecbc676f1d1cf29de227e22/97a96/6.png 2400w,\n/static/ea24f6714ecbc676f1d1cf29de227e22/e16b4/6.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n</blockquote>\n<p>자 이제 <code class=\"language-text\">Etag</code> 가 있는 텍스트 입니다. <code class=\"language-text\">텍스트 요청</code> 버튼을 클릭해 볼까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC7ElEQVQ4y62US08TURSAZwWRpjQpKtjSTttp59XpczotfVhQty5soGr9CSZu1LhXI69A2GtDrGlkQ11D2BICARIEAgvwBxBYYJgFsXfu8cwUiER0ozf5cs7cyXxzztx7h0n4hBtaLPQwmU4P5XPFciyRKmt9+TLPi2WPhy2zrL/sNfH6rMj6Ajjfyl1uT9nl8pR7bvUOsT7uUYiXehjOF3wQjkcgqqYgltRAlqPA+UPAhSQIiQoE+TAiQ1A4iyERBNHMJYgnUqBlspDS+iCbHwBJUh4zz1++Kk19fA/TM/VmfXaWzHyeIY3aJ/L02QsSVgskkbtLFDWLeZ6o2SJJqmmSzfeTOM7lb98h6b48yeYGfhT772ExkQrT+NIofdvfh+/HxwYA0HOmP1SpKISppmVooVCkxeIAzRX6aTqTo2oqQ1U1TRNJjWKVNJ5Mk7ASw+qFClOtVkuLi4uwvLxsrK6u0p2dHTDH+MQkuP0BEKMp4JUk8FIEeEEGHtttoWDrCoiCTLFVg8dPwgVRWKvVSiiC9fV1Y2VlhX7d3LSEE5NT4PKwIEgKyhSQw1EkAkokDrIoQ1QKg6JEIaRlKSdFDVxEwAVrCZeWlmBtbc3AKunGxkarwvEJ6O5xm23gm3msTrIQUS7gXBgFkiSDP65Rv6AYHBcEj9dXYer1emlrawt2d3eN7e1ture3ZwnfDY+Cs+smBDge38xd4GUDGIPgta6D4PP6KVZmmPdwG1WYubm5EiEEKKUGQs3cHMMjY9B1vdsS+vzBK/EHQmakiGFeu3u9FWZ+fr50JrFWudn8j0Kzwmaz+W/CX1omZtsotPbh8MgoRSFFIT176DdQeC4jF8KFhYVBuGKMjo1fWpS/VHgBCp8wjUbj/uHhYfPo6OgE0Q8ODvTT01P99Zu3uruX1XH/6Xh2dTzDOsovgdvpPD9BmvgzGWTa29vtTqdTRbRfcTgcmt1u1zo7zdip2Ww27VpHh9bxR2yptrY2x0+6AyNOsYJPMAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7\"\n        title=\"7\"\n        src=\"/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/c1b63/7.png\"\n        srcset=\"/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/5a46d/7.png 300w,\n/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/0a47e/7.png 600w,\n/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/c1b63/7.png 1200w,\n/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/d61c2/7.png 1800w,\n/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/97a96/7.png 2400w,\n/static/6c6e3271e1ad3e0f5ffa70d5b28fc042/e16b4/7.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>위와 같이 <code class=\"language-text\">3.1MB</code> 으로 묵직한 텍스트가 응답되었습니다. 매 요청마다 <code class=\"language-text\">3.1MB</code> 을 다운로드 하면 모바일 환경에서 데이터는 남아나지 않을 것 입니다. 바로 또 다시 <code class=\"language-text\">텍스트 요청</code> 버튼을 클릭해 볼까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8UlEQVQ4y6WTzU8TQRiH9wQRUjDgB1K223a739tl2+0WSqF8nD3YQNX6H3jwosa7RvnQgJ5NQ8Q0cqGeIVwJgQAJAQIH8A8gcMDQA7Gz8/ruFggo6sFJnsxvJpln5s3MMLGgdNNuF+7Hk8mhdFcm1x5L5OzOdE4U5RzLcjmOC+UCLoGg13PBMM5Xc6ufzbW2srmWO21DXJB/IIhKC8MHI/c0MwqGlYD2uA2qagAfEoAXFBBkHSKihqgQkU57QQZJdrMCZiwBdkcKEnYnpNJ9oCj6Q+bp8xfZ958+wuR0sVKcmSHTX6ZJaeozefzkGdGsbhJLDRDdSmFOEyuVIXErSVLpXmLiXLqnnyQ70yTV1fcj0zuAh4nmmdLXUvbb3h58PzpyAICeMVkoUFnWqG130u6eXprJ9NN0dy9NdnRRK9FBLStJY3GbmmaCmvEk0aMmCKKcZwqFQnZhYQGWlpaclZUVur29DW4bezcBfjYEimaArOggYpmi5KJiydWx20uKTmU16ihqFCRJyTNTU1NZFMHa2pqzvLxMNzY2POH4xAfwt3G4CAUo0XTDw2iP4wYaaFoUokYMZM2ggiA57kYcL1aFi4uLsLq66uAp6fr6elU4PgF4i1iG5KGoOqgoMcw46LICCU0DE7OoaJTnBSciyhCQjTxTLBazm5ubsLOz42xtbdHd3V1P+GZ4BJqab0GYFwGfxDlsIFzNXBgCnJcp4rhzfj+bZ2ZnZ7OEEKCUOgh1s9tGRsag+cZtTxgMRSAUdhG8fMbpmCKOO25juTwzNzeXPZV4t1ypVIXDvwiv4p9C94SVSuX/hBdKJm7ZKPTe4fDIKEUhRSE9XfQbKDyTkXPh/Pz8IFzRRsfeXrqUv5zwHBQ+Ykql0t2Dg4PK4eHhMVLe398vn5yclF++el3Gd1hWNaOMf7eMf7iM8kvwkfN8jFTYQHCQqa2t9TU1NVmIfZHGxuu2z+ezGxoabV9Dg11fX29fq6uz6/5IfaKmpqbxJyjOI+XSPz9DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8\"\n        title=\"8\"\n        src=\"/static/b60b9cc404fed5761fb6066cbd4c0aa1/c1b63/8.png\"\n        srcset=\"/static/b60b9cc404fed5761fb6066cbd4c0aa1/5a46d/8.png 300w,\n/static/b60b9cc404fed5761fb6066cbd4c0aa1/0a47e/8.png 600w,\n/static/b60b9cc404fed5761fb6066cbd4c0aa1/c1b63/8.png 1200w,\n/static/b60b9cc404fed5761fb6066cbd4c0aa1/d61c2/8.png 1800w,\n/static/b60b9cc404fed5761fb6066cbd4c0aa1/97a96/8.png 2400w,\n/static/b60b9cc404fed5761fb6066cbd4c0aa1/e16b4/8.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>텍스트 파일도 이미지 파일과 동일하게 <code class=\"language-text\">Cache-Control: private, max-age=5</code> 가 설정되어 있기 때문에 5초 동안 캐시되어 있는 것을 확인할 수 있습니다. 그럼 이번에는 5초 기달렸다가 요청을 보내볼 까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC50lEQVQ4y6WU3U/TUBjGewWRZZsZfsBgH13Xdu26rfvo6DYcEG+9cIGp808w8UaN9xqjoCHIrS7EmUVumNcQbgmBAAkBAhfgH0DgAmMviDs9r2/LhxCFmHiSJ+ft255fn6c9LZMMite1BH8vlc0OFfLFciKZKWt6oSwIkbLPFygHAmzZb8kftOdAMIT9o9rb5St7vb5yR2f3UCDI3ecFqYPhguG7UTUG8XQGEikNZDkOHMsDx0vARxQIC1GUDGHxeOYjIEasWgI1mQGtJwcZTYdcoR8kSXnAPHn2vDT26QNMTNab9akpMvllkjRqn8mjx09JNN1LkrkBoqRzWOdJJtdHUuksyRf6iIq93lsDJJsrkFy+/2ex/zaaiVWYxtdG6dvODnw/ODABgJ5o4mOVohOqaTrt7S3SYt8AzReKNKsXKEJpOpOlakqjqpqhyVSWRJU48LxYYarVamlubg4WFhbMpaUlurm5CdYYHnkHnV4/yEoC40cgIscgxAkYVzmOrYAgypaoJMdN6xz2K0ytVishCFZWVszFxUW6trZmA0dHx6Cr248LZRBxoYRAy4USU0GUovYNrBpnGuZFUxAlwBd4BJyfn4fl5WUTXdLV1VUb+H58HC8IIgzdSRLEEyok1CT06HlIRKOgJ+Kg6zlMEKeCIJiiKALLhipMvV4vra+vw9bWlrmxsUG3t7dt4Os3w9B+7aYdM8iGz4lFhVgO2BCPxxzFnmn1MVGFmZ6eLhFCgFJqomgT6yPgyIVAS4Hf9XngzMyMDcRhv+Vm89+AtlPb4SVA22Gz+X/AM5GJFRuB9j7EZ0gRSBFIjxf9IQSewMgpcHZ2dhD+MoZH3oKn/YbtEL/TyxyeCoEPmUajcWdvb6+5v7//A2Xs7u4ah4eHxouXr4yu7oAhR+MGfjEGbloD4efEhU/rH6gm/kwGmdbWVqfH40mjtLNyu69qTqdTc7ncmtPl0hwOh3alrU1ru1COTEtLi/sXfn4kFDWeVfUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"9\"\n        title=\"9\"\n        src=\"/static/0dbbcd86472dac6d2693f6cc3aa02448/c1b63/9.png\"\n        srcset=\"/static/0dbbcd86472dac6d2693f6cc3aa02448/5a46d/9.png 300w,\n/static/0dbbcd86472dac6d2693f6cc3aa02448/0a47e/9.png 600w,\n/static/0dbbcd86472dac6d2693f6cc3aa02448/c1b63/9.png 1200w,\n/static/0dbbcd86472dac6d2693f6cc3aa02448/d61c2/9.png 1800w,\n/static/0dbbcd86472dac6d2693f6cc3aa02448/97a96/9.png 2400w,\n/static/0dbbcd86472dac6d2693f6cc3aa02448/e16b4/9.png 2546w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>이번에는 <code class=\"language-text\">141B</code> 로 매우 가벼운 응답이 온 것을 확인할 수 있습니다.</p>\n<p>이유는 파일이 변경되지 않았기 때문에 Server에서 <code class=\"language-text\">ETag</code> 가 변경되지 않아 이전과 <code class=\"language-text\">ETag</code> 가 동일하기 때문에 <code class=\"language-text\">304</code> 를 응답하기 때문입니다.</p>\n<p>덕분에 캐시가 끝나서 다시 <code class=\"language-text\">3.1MB</code> 응답받을 뻔! 했지만? Server에서 변경되지 않았다고 <code class=\"language-text\">304</code> 상태 코드와 <code class=\"language-text\">ETag</code> 를 header 응답해줘서 5초 동안은 캐시될 수 있도록 생명연장이 되었습니다. 😤 😮‍💨</p>\n<p>그러면 궁금한 것이 이전 <code class=\"language-text\">ETag</code> 를 Server는 어떻게 알고 있는 걸까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACl0lEQVQ4y3VUuXLbMBTkX8QzkURdlHiCNylSkg85zqRLmzKFu/x/vdkFRYe2lWIHIAA+vH27D05XNUgLIq/RtD2StEAQhAjCGEXVoqwPyMsGFccsrxAn2XXMEfJMllaI0hppmtt1pz8cYbISsclhGOz8cMHl+Tsen15wun9C253sel7U9gcbzAw/p4TJCgYrEMUZ4jiF0zBgyoBdf4+CmSiDqu4Y7GIDaa8/PqBuev5kUJNFx++MjExa2ku15gcJ/NDAmc2XEBbu2uLffINxb75YWUzPTvcWLve55q53cCKmud9H2PsDdNNytcGKEI0gMgijFDoXMfsgTLDbh2/nx7lGgZQ7cme6fmDF0Nj1ZwpRo6wOlrIuCUjH2wXYej422/1N7PYBnODnH8xeXvHl8ht3315xd/5lM5GyJqMIdEBetlT8AI8ZiK673HyC1tcbD4673MJdee8wWkQqZlRX1JOrkqu1dxPL1ZYMfDhLRp9Ct0llKReybqI4/jTNSAGmmC/WSEzGgCtlOCyOB3cssqgKsoYgI4/FVy0tTavwUIKvMxdmDDiFNuXFtjujajorjIKNkOIJLwip/pvS9qKIZ5v/BGQntDI6qVc0tGEtNS85z8pBpKElW1tn75r1zYALBuzYlz+ORzy3B4tL0+KhrNBGMU5phnCzxexKd0o5+URZBecY0bwFe1TIU40lUpYh9EMk3AuCmFRja3L50+eowIaJOB/patQBvT4lacamGPynPdmD7aUzH22jFvwUcAwqz3XHe/sIqE6yznxCcQqtD5SXA+VbjpfK/ekRzeFkO0SFV9a7Sf96u6F31eta33pXURIqqsbXm6i5FFZAqSjLCDL5gapbw1PpnP4cHgx2EEsyPBrGPtB/Ad0RGxrSv14MAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"10\"\n        title=\"10\"\n        src=\"/static/7c2037d2e1adac899be6cbd486683ae8/c1b63/10.png\"\n        srcset=\"/static/7c2037d2e1adac899be6cbd486683ae8/5a46d/10.png 300w,\n/static/7c2037d2e1adac899be6cbd486683ae8/0a47e/10.png 600w,\n/static/7c2037d2e1adac899be6cbd486683ae8/c1b63/10.png 1200w,\n/static/7c2037d2e1adac899be6cbd486683ae8/0ef7e/10.png 1594w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>진실은 Client (브라우저) 가 알아서 포함해서 보내기 때문입니다.</p>\n<p>텍스트도 이미지와 같이 <code class=\"language-text\">max-age</code> 값을 바꾸거나 텍스트 파일을 수정해보면서 어떤 식으로 돌아가는지 확인해보세요. <code class=\"language-text\">ETag</code> 가 없을 때 캐시가 만료되면 어떻게 동작하는지 직접 확인하면 이해가 빠를 것 입니다.</p>\n<h1 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h1>\n<p>만들고나니 엄청나게 특별한 로직이 존재하지는 않았습니다. 그래도 실제로 캐시 유무에 따른 변화와 함께 상용으로 사용되는 웹 서버도 이와 비슷한 메커니즘으로 처리되겠구나 하는 것을 인지할 수 있었습니다.</p>\n<p>덕분에 앞으로 웹 앱을 배포하고 무작정 캐시 문제라고 생각할 것이 아니라 논리적으로 트러블 슈팅을 할 수 있는 귀중한 경험치가 될 거 같습니다.</p>\n<p>저와 같이 블랙박스 영역의 웹 서버 로직이 궁금하셨을 분들에게 조금이라도 도움이 됬으면 하며 저는 이만 물러가도록 하겠습니다. 읽어주셔서 감사합니다. 😀</p>","frontmatter":{"title":"간단한 HTTP 캐시 서버를 만들어보자 (with golang)","date":"November 17, 2021"}}},"pageContext":{"slug":"/golang/lets-create-an-http-cache-server-with-golang/","previous":{"fields":{"slug":"/essay/share-react-boilerplate-with-gin/"},"frontmatter":{"title":"gin과 함께하는 react boilerplate를 공유합니다","category":"essay","draft":false}},"next":{"fields":{"slug":"/azure/how-is-k8s-external-ip-handled-in-azure/"},"frontmatter":{"title":"k8s의 EXTERNAL-IP는 Azure에서 어떻게 처리될 까?","category":"azure","draft":false}}}},"staticQueryHashes":["2486386679","3128451518"]}